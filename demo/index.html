<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Vue</title>
		<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.12/vue.min.js"></script>
		<!-- <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script> -->
		<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/> -->
		<!-- <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css"> -->
		<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
		<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
		<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
		<style>
			.modal1{
				position: absolute;
				left: 0;
				top:0;
				width: 100%;
				height: 100%;
				background-color: black;
				opacity: .6;
			}
			.input_wrapper{
				position: relative;
				width: 500px;
				height: 400px;
				background-color: white;
				border-radius: 10px;
				left: 50%;
				top:50%;
				transform: translate(-50%,-50%);
				padding: 20px;
			}
			.input_wrapper i{
				position: absolute;
				right: 10px;
				top: 10px;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<div id="app" class="container">
			<div class="row">
				<form class="form-inline">
				  <div class="form-group">
				    <input type="text" class="form-control" placeholder="标题" v-model="userInfo.title">
				  </div>
				  <div class="form-group">
				    <input type="text" class="form-control" placeholder="发布人" v-model="userInfo.user">
				  </div>
				  <div class="form-group">
				    <input type="date" class="form-control" v-model="userInfo.date">
				  </div>
				  <button type="button" class="btn btn-primary" @click="add()" :disabled="!userInfo.title||!userInfo.user||!userInfo.date">添加</button>
				</form>
			</div>
			<hr >
			<div class="row">
				<table class="table table-striped table-hover">
					<tr>
						<th>编号</th>
						<th>标题</th>
						<th>用户</th>
						<th>日期</th>
						<th>操作</th>
					</tr>
					<tr v-for="(v,i) in list" :key="v.id">
						<td>{{i+1}}--{{v.id}}</td>
						<td>{{v.title}}</td>
						<td>{{v.user}}</td>
						<td>{{v.date}}</td>
						<td>
							<button type="button" class="btn btn-danger" @click="del(v)">删除</button>
							<button type="button" class="btn btn-info" @click="edit(v)">编辑</button>
						</td>
					</tr>
				</table>
			</div>
			
			<!-- 修改表单 -->
			<div class="modal1" v-show="isShowModal">

				<div class="input_wrapper">
					<i class="glyphicon glyphicon-remove" @click="isShowModal=false"></i>
					<form>
					  <div class="form-group">
					    <input type="text" class="form-control" placeholder="请输入标题" v-model="editInfo.title">
					  </div>
					  <div class="form-group">
					    <input type="text" class="form-control" placeholder="发布人" v-model="editInfo.user">
					  </div>
					  <div class="form-group">
					    <input type="date" class="form-control" v-model="editInfo.date">
					  </div>
					  <button type="button" class="btn btn-primary" @click="update(editInfo)">修改</button>
					  <button type="button" class="btn btn-success" @click="isShowModal=false">取消</button>
					</form>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		const app = new Vue({
			el:'#app',
			data:{
				isShowModal:false,
				userInfo:{
					title:'',
					user:'',
					date:''
				},
				editInfo:{
					title:'',
					user:'',
					date:''
				},
				list:[
					{title:'标题1',user:'user1',date:'2021-04-21',id:1},
					{title:'标题2',user:'user2',date:'2021-04-21',id:2},
					{title:'标题3',user:'user3',date:'2021-04-21',id:14},
				]
			},
			methods:{
				add(){
					let {title,user,date} = this.userInfo;
					// 必填判断
					if(!title||!user||!date){
						alert('请检查输入');
						return ;
					}
					// 添加
					// let _id = new Date().getTime(); 
					let _id = Math.max(...this.list.map(item=>item.id))+1;
					
					this.list.push({...this.userInfo,id:_id});
					// 清空输入框
					this.userInfo = {};
				},
				del(v){
					this.list = this.list.filter(item=>item.id!=v.id);
				},
				edit(v){
					this.isShowModal = true;
					this.editInfo = {...v};
				},
				update(v){
					this.list.filter(item=>item.id==v.id)[0] = this.editInfo;
					this.isShowModal = false;
				}
			}
		})
	</script>
</html>
